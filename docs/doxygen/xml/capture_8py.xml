<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.17">
  <compounddef id="capture_8py" kind="file" language="Python">
    <compoundname>capture.py</compoundname>
    <innerclass refid="classcore_1_1capture_1_1capture" prot="public">core::capture::capture</innerclass>
    <innernamespace refid="namespacecore_1_1capture">core::capture</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">#!/usr/bin/env<sp/>python3</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="comment">#**<sp/>*****************************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="comment">#*<sp/>Copyright<sp/>(C)<sp/>2021<sp/>Sky<sp/>group<sp/>of<sp/>companies,<sp/>All<sp/>Rights<sp/>Reserved</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="comment">#*<sp/>******************************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="comment">#*</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="comment">#*<sp/><sp/><sp/>**<sp/>Project<sp/><sp/><sp/><sp/><sp/><sp/>:<sp/>RAFT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="comment">#*<sp/><sp/><sp/>**<sp/>@addtogroup<sp/><sp/>:<sp/>core</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="comment">#*<sp/><sp/><sp/>**<sp/>@date<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/>03/04/2022</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="comment">#*<sp/><sp/><sp/>**</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="comment">#*<sp/><sp/><sp/>**<sp/>@brief<sp/>:<sp/>ocr<sp/>capture<sp/>module<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="comment">#*<sp/><sp/><sp/>**</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="comment">#*<sp/>******************************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>cv2,<sp/>os</highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>datetime<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>datetime,<sp/>timedelta</highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>pytesseract<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>pytesseract</highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>PIL<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Image,<sp/>ImageFilter</highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>framework.core.utilities<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>utilities<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>utils</highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>framework.core.logModule<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>logModule</highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight></codeline>
<codeline lineno="21" refid="classcore_1_1capture_1_1capture" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classcore_1_1capture_1_1capture" kindref="compound">capture</ref>(utils):</highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classcore_1_1capture_1_1capture_1acd0a8b26f96cd595422411ac2b1d1499" kindref="member">__init__</ref>(self,<sp/>log:logModule,<sp/>captureImagesPath:str,<sp/>ocrEnginePath:str,<sp/>resolution:str,<sp/>input:str,<sp/>**kwargs:dict):</highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Initialise<sp/>the<sp/>OCR<sp/>capture<sp/>engine</highlight></codeline>
<codeline lineno="24"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="25"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="26"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log<sp/>(logModule):<sp/>logging<sp/>module</highlight></codeline>
<codeline lineno="27"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>captureImagesPath<sp/>(str):<sp/>output<sp/>capture<sp/>images<sp/>path</highlight></codeline>
<codeline lineno="28"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ocrEnginePath<sp/>(str):<sp/>ocr<sp/>binary<sp/>path</highlight></codeline>
<codeline lineno="29"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>resolution<sp/>(str):<sp/>input<sp/>resolution</highlight></codeline>
<codeline lineno="30"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>input<sp/>(str):<sp/>input<sp/>number<sp/>for<sp/>capture</highlight></codeline>
<codeline lineno="31"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>utils.__init__(self,<sp/>log)</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a5eefa2565ecba32c1e22606d3c40823a" kindref="member">log</ref><sp/>=<sp/>log</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a50dc3c775d2946e15c36295c97ac51c8" kindref="member">resolution</ref><sp/>=<sp/>resolution</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a194429aed1791252ff11f04c0a796bac" kindref="member">captureImagesPath</ref><sp/>=<sp/>captureImagesPath</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a2b99448f2da5e6a8a445502c12f3d0de" kindref="member">ocrEnginePath</ref><sp/>=<sp/>ocrEnginePath</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a5cc3a5b731b8b56467631cd17f08f2fd" kindref="member">captureInput</ref><sp/>=<sp/>input</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1af63adc6b114f1440f94242d4c1944bb0" kindref="member">captureImagesCount</ref><sp/>=<sp/>1</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1afdc941259be6106fda4ed355655d196a" kindref="member">videoApi</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1afe2b201ff54c8eb65a70a923b4416dfd" kindref="member">regionDetails</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1adf05ecae5170ad26c556c4ee9bda0c2f" kindref="member">screenRegions</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classcore_1_1capture_1_1capture_1aad1b291069ebe3be6b05b8b6b55c2c1a" kindref="member">setRegions</ref>(<sp/>self,<sp/>regionsConfig:dict<sp/>):</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Set<sp/>the<sp/>capture<sp/>regions<sp/>dictionary<sp/>to<sp/>operate<sp/>with</highlight></codeline>
<codeline lineno="45"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="46"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="47"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>regionsConfig<sp/>(dict):<sp/>capture<sp/>regions<sp/>dictionary</highlight></codeline>
<codeline lineno="48"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1adf05ecae5170ad26c556c4ee9bda0c2f" kindref="member">screenRegions</ref><sp/>=<sp/>regionsConfig</highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classcore_1_1capture_1_1capture_1a7080166bbd57f2f6d6e998e998bca7f2" kindref="member">start</ref>(self):</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Initialise<sp/>capturing<sp/>video<sp/>output<sp/>from<sp/>capture<sp/>card</highlight></codeline>
<codeline lineno="53"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a5eefa2565ecba32c1e22606d3c40823a" kindref="member">log</ref>.info(</highlight><highlight class="stringliteral">&quot;capture.initaliseVideoCapture&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a5eefa2565ecba32c1e22606d3c40823a" kindref="member">log</ref>.step(</highlight><highlight class="stringliteral">&quot;Initializing<sp/>OCR<sp/>Engine.<sp/>This<sp/>may<sp/>take<sp/>upto<sp/>60secs..,&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pytesseract.tesseract_cmd<sp/>=<sp/></highlight><highlight class="stringliteral">r&quot;{}&quot;</highlight><highlight class="normal">.format(self.<ref refid="classcore_1_1capture_1_1capture_1a2b99448f2da5e6a8a445502c12f3d0de" kindref="member">ocrEnginePath</ref>)</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1afdc941259be6106fda4ed355655d196a" kindref="member">videoApi</ref><sp/>=<sp/>cv2.VideoCapture(int(self.<ref refid="classcore_1_1capture_1_1capture_1a5cc3a5b731b8b56467631cd17f08f2fd" kindref="member">captureInput</ref>))</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>Exception<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>e:</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a5eefa2565ecba32c1e22606d3c40823a" kindref="member">log</ref>.error(e)</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>Exception(</highlight><highlight class="stringliteral">&apos;Failed<sp/>to<sp/>start<sp/>Video<sp/>Capture&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>set<sp/>Frame<sp/>resolution<sp/>to<sp/>self.resolution</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a50dc3c775d2946e15c36295c97ac51c8" kindref="member">resolution</ref><sp/>==<sp/></highlight><highlight class="stringliteral">&apos;1080p&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1afdc941259be6106fda4ed355655d196a" kindref="member">videoApi</ref>.set(cv2.CAP_PROP_FRAME_WIDTH,<sp/>1920)</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1afdc941259be6106fda4ed355655d196a" kindref="member">videoApi</ref>.set(cv2.CAP_PROP_FRAME_HEIGHT,<sp/>1080)</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a50dc3c775d2946e15c36295c97ac51c8" kindref="member">resolution</ref><sp/>==<sp/></highlight><highlight class="stringliteral">&apos;720p&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1afdc941259be6106fda4ed355655d196a" kindref="member">videoApi</ref>.set(cv2.CAP_PROP_FRAME_WIDTH,<sp/>1280)</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1afdc941259be6106fda4ed355655d196a" kindref="member">videoApi</ref>.set(cv2.CAP_PROP_FRAME_HEIGHT,<sp/>720)</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a5eefa2565ecba32c1e22606d3c40823a" kindref="member">log</ref>.error(</highlight><highlight class="stringliteral">&apos;UNSUPPORTED<sp/>Video<sp/>Resolution&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a5eefa2565ecba32c1e22606d3c40823a" kindref="member">log</ref>.info(</highlight><highlight class="stringliteral">&quot;Frame<sp/>resolution<sp/>set<sp/>as:<sp/>&quot;</highlight><highlight class="normal"><sp/>+<sp/>str(self.<ref refid="classcore_1_1capture_1_1capture_1afdc941259be6106fda4ed355655d196a" kindref="member">videoApi</ref>.get(cv2.CAP_PROP_FRAME_WIDTH))+<sp/></highlight><highlight class="stringliteral">&quot;<sp/>x<sp/>&quot;</highlight><highlight class="normal"><sp/>+str(self.<ref refid="classcore_1_1capture_1_1capture_1afdc941259be6106fda4ed355655d196a" kindref="member">videoApi</ref>.get(cv2.CAP_PROP_FRAME_HEIGHT)))</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classcore_1_1capture_1_1capture_1a237714178beed7cc0cf0da74a227392d" kindref="member">stop</ref>(self):</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Stop<sp/>videocapture<sp/>and<sp/>release<sp/>the<sp/>resources</highlight></codeline>
<codeline lineno="77"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1afdc941259be6106fda4ed355655d196a" kindref="member">videoApi</ref>.release()</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cv2.destroyAllWindows()</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a5eefa2565ecba32c1e22606d3c40823a" kindref="member">log</ref>.info(</highlight><highlight class="stringliteral">&quot;Successfully<sp/>released<sp/>Video<sp/>capture<sp/>resources&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal"></highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classcore_1_1capture_1_1capture_1afe45e74bfcbc4cf3d0682d4457137316" kindref="member">startImageCapture</ref>(self):</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Capture<sp/>current<sp/>video<sp/>frame<sp/>from<sp/>video<sp/>input<sp/>and<sp/>return<sp/>a<sp/>PIL<sp/>Image</highlight></codeline>
<codeline lineno="85"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a5eefa2565ecba32c1e22606d3c40823a" kindref="member">log</ref>.info(</highlight><highlight class="stringliteral">&quot;capture.startImageCapture&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_,<sp/>frame<sp/>=<sp/>self.<ref refid="classcore_1_1capture_1_1capture_1afdc941259be6106fda4ed355655d196a" kindref="member">videoApi</ref>.read()</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>imgPath<sp/>=<sp/>os.path.join(self.<ref refid="classcore_1_1capture_1_1capture_1a194429aed1791252ff11f04c0a796bac" kindref="member">captureImagesPath</ref>,<sp/></highlight><highlight class="stringliteral">&quot;image{}.png&quot;</highlight><highlight class="normal">.format(self.<ref refid="classcore_1_1capture_1_1capture_1af63adc6b114f1440f94242d4c1944bb0" kindref="member">captureImagesCount</ref>))</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cv2.imwrite(imgPath,<sp/>frame)</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>image<sp/>=<sp/>Image.open(imgPath)</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1af63adc6b114f1440f94242d4c1944bb0" kindref="member">captureImagesCount</ref><sp/>+=<sp/>1</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>image</highlight></codeline>
<codeline lineno="93"><highlight class="normal"></highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classcore_1_1capture_1_1capture_1a2db6d92c4fa7b32b4343010f836099c7" kindref="member">getRegionCoords</ref>(self,<sp/>regionName):</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Get<sp/>region<sp/>co<sp/>ordinates<sp/>and<sp/>ocr<sp/>filters<sp/>for<sp/>the<sp/>given<sp/>region<sp/>name</highlight></codeline>
<codeline lineno="96"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="97"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="98"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>regionName<sp/>(str)<sp/>-<sp/>Name<sp/>of<sp/>the<sp/>region</highlight></codeline>
<codeline lineno="99"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="100"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="101"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>regionsDict<sp/>(dict)<sp/>-<sp/>Dictionary<sp/>of<sp/>region<sp/>co-ordinates<sp/>and<sp/>filters</highlight></codeline>
<codeline lineno="102"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Ex:<sp/>regionsDict<sp/>=<sp/>{co_ords:<sp/>(730,<sp/>410,<sp/>1155,<sp/>650),<sp/>filters:<sp/>&quot;None&quot;}</highlight></codeline>
<codeline lineno="103"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a5eefa2565ecba32c1e22606d3c40823a" kindref="member">log</ref>.info(</highlight><highlight class="stringliteral">&quot;capture.getRegionCoords<sp/>for<sp/>-<sp/>{}&quot;</highlight><highlight class="normal">.format(regionName))</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>regionsDict<sp/>=<sp/>{}</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>k,<sp/>v<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1adf05ecae5170ad26c556c4ee9bda0c2f" kindref="member">screenRegions</ref>.items():</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>k<sp/>==<sp/>regionName:</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>key,<sp/>val<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>v.items():</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>key<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;co_ords&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>regionsDict[key]<sp/>=<sp/>eval(val)</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>regionsDict[key]<sp/>=<sp/>val</highlight></codeline>
<codeline lineno="113"><highlight class="normal"></highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>regionsDict</highlight></codeline>
<codeline lineno="115"><highlight class="normal"></highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classcore_1_1capture_1_1capture_1a9be19a6cbb0b567aa4d85d972af7be0b" kindref="member">applyOcrImageFilter</ref>(self,<sp/>inputImage,<sp/>filterName):</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Applied<sp/>ocr<sp/>filters<sp/>on<sp/>the<sp/>input<sp/>image</highlight></codeline>
<codeline lineno="118"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="119"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="120"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inputImage<sp/>(PIL<sp/>Image)</highlight></codeline>
<codeline lineno="121"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>filterName<sp/>(str)<sp/>-<sp/>Filter<sp/>to<sp/>be<sp/>applied<sp/>on<sp/>the<sp/>image</highlight></codeline>
<codeline lineno="122"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="123"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="124"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outputImage<sp/>(PIL<sp/>Image)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="125"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a5eefa2565ecba32c1e22606d3c40823a" kindref="member">log</ref>.info(</highlight><highlight class="stringliteral">&apos;capture.applyOcrImageFilter<sp/>-<sp/>{}&apos;</highlight><highlight class="normal">.format(filterName))</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>filterName<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;edge_enhance&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outputImage<sp/>=<sp/>inputImage.filter(ImageFilter.EDGE_ENHANCE)</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>filterName<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;gaussian_blur&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outputImage<sp/>=<sp/>inputImage.filter(ImageFilter.GaussianBlur)</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>filterName<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;smooth&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outputImage<sp/>=<sp/>inputImage.filter(ImageFilter.SMOOTH)</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>filterName<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;edge_enhance_more&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outputImage<sp/>=<sp/>inputImage.filter(ImageFilter.EDGE_ENHANCE_MORE)</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>filterName<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;None&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>inputImage</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a5eefa2565ecba32c1e22606d3c40823a" kindref="member">log</ref>.info(</highlight><highlight class="stringliteral">&apos;Invalid<sp/>OCR<sp/>filter<sp/>-<sp/>{}&apos;</highlight><highlight class="normal">.format(filterName))</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>outputImage</highlight></codeline>
<codeline lineno="140"><highlight class="normal"></highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classcore_1_1capture_1_1capture_1aed3b52ac7ecbdcd8929b8821738f3d1c" kindref="member">__getOCRText__</ref>(self,<sp/>regionName):</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Get<sp/>text<sp/>from<sp/>device<sp/>screen<sp/>video<sp/>output</highlight></codeline>
<codeline lineno="143"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="144"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="145"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>regionName<sp/>(str)<sp/>-<sp/>refer<sp/>screen_regions.yml</highlight></codeline>
<codeline lineno="146"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="147"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="148"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ocrText<sp/>(str)<sp/>-<sp/>Text<sp/>extracted<sp/>from<sp/>the<sp/>screen<sp/>region</highlight></codeline>
<codeline lineno="149"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a5eefa2565ecba32c1e22606d3c40823a" kindref="member">log</ref>.info(</highlight><highlight class="stringliteral">&quot;capture.getOCRText&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>image<sp/>=<sp/>self.<ref refid="classcore_1_1capture_1_1capture_1afe45e74bfcbc4cf3d0682d4457137316" kindref="member">startImageCapture</ref>()</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1afe2b201ff54c8eb65a70a923b4416dfd" kindref="member">regionDetails</ref><sp/>=<sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a2db6d92c4fa7b32b4343010f836099c7" kindref="member">getRegionCoords</ref>(regionName)</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>croppedImage<sp/>=<sp/>image.crop(self.<ref refid="classcore_1_1capture_1_1capture_1afe2b201ff54c8eb65a70a923b4416dfd" kindref="member">regionDetails</ref>[</highlight><highlight class="stringliteral">&apos;co_ords&apos;</highlight><highlight class="normal">])</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1afe2b201ff54c8eb65a70a923b4416dfd" kindref="member">regionDetails</ref>[</highlight><highlight class="stringliteral">&apos;filters&apos;</highlight><highlight class="normal">]<sp/>!=<sp/></highlight><highlight class="stringliteral">&apos;None&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>croppedImage<sp/>=<sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a9be19a6cbb0b567aa4d85d972af7be0b" kindref="member">applyOcrImageFilter</ref>(croppedImage,<sp/>self.<ref refid="classcore_1_1capture_1_1capture_1afe2b201ff54c8eb65a70a923b4416dfd" kindref="member">regionDetails</ref>[</highlight><highlight class="stringliteral">&apos;filters&apos;</highlight><highlight class="normal">])</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ocrText<sp/>=<sp/>pytesseract.image_to_string(croppedImage)</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a5eefa2565ecba32c1e22606d3c40823a" kindref="member">log</ref>.info(ocrText)</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ocrText</highlight></codeline>
<codeline lineno="159"><highlight class="normal"></highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classcore_1_1capture_1_1capture_1adc9b23d98b0ec0976b090e6901aaf505" kindref="member">checkOcrText</ref>(self,<sp/>regionName,<sp/>expectedText=&quot;&quot;):</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Check<sp/>expected<sp/>text<sp/>against<sp/>the<sp/>OCRed<sp/>text<sp/>from<sp/>screen<sp/>for<sp/>given<sp/>region<sp/>and<sp/>return<sp/>the<sp/>result</highlight></codeline>
<codeline lineno="162"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="163"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="164"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>expectedText<sp/>(str)<sp/>-<sp/>Expected<sp/>text<sp/>on<sp/>the<sp/>screen</highlight></codeline>
<codeline lineno="165"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>regionName<sp/>(str)<sp/>-<sp/>stb<sp/>screen<sp/>region<sp/>(refer<sp/>screen_regions.yml)</highlight></codeline>
<codeline lineno="166"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="167"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="168"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>(boolean)</highlight></codeline>
<codeline lineno="169"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a5eefa2565ecba32c1e22606d3c40823a" kindref="member">log</ref>.info(</highlight><highlight class="stringliteral">&quot;capture.checkOcrText&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ocrText<sp/>=<sp/>self.<ref refid="classcore_1_1capture_1_1capture_1aed3b52ac7ecbdcd8929b8821738f3d1c" kindref="member">__getOCRText__</ref>(regionName)</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>expectedText<sp/>==<sp/></highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal">:<sp/></highlight><highlight class="comment">#<sp/>If<sp/>script<sp/>didn&apos;t<sp/>send<sp/>expectedText<sp/>then<sp/>check<sp/>the<sp/>platforms<sp/>screen_regions.yml</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1afe2b201ff54c8eb65a70a923b4416dfd" kindref="member">regionDetails</ref>[</highlight><highlight class="stringliteral">&apos;ocr_text&apos;</highlight><highlight class="normal">]:</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>expectedText<sp/>=<sp/>self.<ref refid="classcore_1_1capture_1_1capture_1afe2b201ff54c8eb65a70a923b4416dfd" kindref="member">regionDetails</ref>[</highlight><highlight class="stringliteral">&apos;ocr_text&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>expectedText<sp/>==<sp/></highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a5eefa2565ecba32c1e22606d3c40823a" kindref="member">log</ref>.error(</highlight><highlight class="stringliteral">&apos;Please<sp/>pass<sp/>expectedText<sp/>for<sp/>OCR<sp/>region<sp/>-<sp/>{}&apos;</highlight><highlight class="normal">.format(regionName))</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>Exception(</highlight><highlight class="stringliteral">&apos;ExpectedText<sp/>is<sp/>missing&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/>self.fuzzyCompareText(expectedText,<sp/>ocrText)</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result</highlight></codeline>
<codeline lineno="180"><highlight class="normal"></highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classcore_1_1capture_1_1capture_1a2196ccf871f7e38d82721b3e1391f126" kindref="member">waitForDisplayedScreen</ref>(self,<sp/>regionName,<sp/>waitBetweenChecks=1,<sp/>maxWaitTime=10):</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Wait<sp/>until<sp/>a<sp/>screen<sp/>is<sp/>displayed<sp/>on<sp/>the<sp/>device</highlight></codeline>
<codeline lineno="183"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="184"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="185"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>regionName<sp/>(str)<sp/>-<sp/>Region<sp/>where<sp/>text<sp/>is<sp/>expected<sp/>on<sp/>the<sp/>screen</highlight></codeline>
<codeline lineno="186"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>expectedText<sp/>(str)<sp/>-<sp/>Expected<sp/>text<sp/>on<sp/>the<sp/>screen.<sp/>If<sp/>empty,<sp/>uses<sp/>ocr_text<sp/>of<sp/>regionName<sp/>from<sp/>xx.xx.screen_regions.yml</highlight></codeline>
<codeline lineno="187"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>waitBetweenChecks<sp/>(int)<sp/>-<sp/>Wait<sp/>in<sp/>secs<sp/>after<sp/>every<sp/>check</highlight></codeline>
<codeline lineno="188"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>maxWaitTime<sp/>(int)<sp/>-<sp/>Maximum<sp/>wait<sp/>time<sp/>to<sp/>check<sp/>for<sp/>the<sp/>expected<sp/>screen</highlight></codeline>
<codeline lineno="189"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="190"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="191"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>(bool)</highlight></codeline>
<codeline lineno="192"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a5eefa2565ecba32c1e22606d3c40823a" kindref="member">log</ref>.info(</highlight><highlight class="stringliteral">&quot;capture.waitForDisplayedScreen<sp/>-<sp/>{}&quot;</highlight><highlight class="normal">.format(regionName))</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>currentTime<sp/>=<sp/>datetime.now()</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>waitUntil<sp/>=<sp/>currentTime+timedelta(seconds=maxWaitTime)</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a5eefa2565ecba32c1e22606d3c40823a" kindref="member">log</ref>.info(</highlight><highlight class="stringliteral">&quot;Waiting<sp/>until<sp/>-<sp/>{}&quot;</highlight><highlight class="normal">.format(waitUntil))</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>currentTime<sp/>&lt;<sp/>waitUntil:</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/>self.<ref refid="classcore_1_1capture_1_1capture_1adc9b23d98b0ec0976b090e6901aaf505" kindref="member">checkOcrText</ref>(regionName)</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>result:</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.wait(waitBetweenChecks)</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>currentTime<sp/>=<sp/>datetime.now()</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>resultLog<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;Screen<sp/>was<sp/>NOT<sp/>displayed&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>result:</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>resultLog<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;Screen<sp/>displayed<sp/>at<sp/>-<sp/>{}&apos;</highlight><highlight class="normal">.format(currentTime)</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classcore_1_1capture_1_1capture_1a5eefa2565ecba32c1e22606d3c40823a" kindref="member">log</ref>.info(resultLog)</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result</highlight></codeline>
    </programlisting>
    <location file="framework/core/capture.py"/>
  </compounddef>
</doxygen>
